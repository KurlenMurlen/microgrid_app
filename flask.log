/Users/null/microgrid_app/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
Starting Flask on port 5050 (set PORT env var to override)
 * Serving Flask app 'app'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5050
 * Running on http://10.95.50.122:5050
[33mPress CTRL+C to quit[0m
 * Restarting with stat
/Users/null/microgrid_app/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
 * Debugger is active!
 * Debugger PIN: 135-539-520
127.0.0.1 - - [09/Oct/2025 21:04:49] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:04:53] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:04:53] "[36mGET /static/styles.css HTTP/1.1[0m" 304 -
127.0.0.1 - - [09/Oct/2025 21:04:54] "[36mGET /static/favicon.svg HTTP/1.1[0m" 304 -
127.0.0.1 - - [09/Oct/2025 21:04:54] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:04:54] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:09] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:09] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:14] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:14] "[36mGET /static/styles.css HTTP/1.1[0m" 304 -
127.0.0.1 - - [09/Oct/2025 21:05:14] "[36mGET /static/favicon.svg HTTP/1.1[0m" 304 -
127.0.0.1 - - [09/Oct/2025 21:05:14] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:14] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:14] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:15] "[36mGET /static/styles.css HTTP/1.1[0m" 304 -
127.0.0.1 - - [09/Oct/2025 21:05:15] "[36mGET /static/favicon.svg HTTP/1.1[0m" 304 -
127.0.0.1 - - [09/Oct/2025 21:05:15] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:15] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:30] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:30] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:45] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:05:45] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:06:00] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:06:00] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:06:15] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:06:15] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:06:30] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:06:30] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:06:45] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:06:45] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:07:00] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:07:00] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:07:15] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:07:15] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:07:30] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:07:30] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:07:45] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:07:45] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:08:00] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:08:00] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:08:15] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:08:15] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:08:30] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:08:30] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:08:45] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:08:45] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:09:00] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:09:00] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:09:15] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:09:15] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:09:30] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:09:30] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:09:45] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:09:45] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:10:00] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:10:00] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:10:18] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:10:18] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:10:30] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:10:30] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:10:46] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:10:46] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:11:05] "[35m[1mGET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1[0m" 500 -
Traceback (most recent call last):
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/pandas/io/sql.py", line 2202, in execute
    cur.execute(sql, *args)
sqlite3.OperationalError: database is locked

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/flask/app.py", line 2213, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/flask/app.py", line 2193, in wsgi_app
    response = self.handle_exception(e)
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/flask_cors/extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "/Users/null/microgrid_app/app.py", line 651, in api_dashboard
    df = load_source(source)
  File "/Users/null/microgrid_app/app.py", line 53, in load_source
    return load_latest_data()
  File "/Users/null/microgrid_app/app.py", line 57, in load_latest_data
    df = pd.read_sql_query("SELECT timestamp, consumption_kW, temperature_C FROM consumption ORDER BY timestamp ASC", conn, parse_dates=["timestamp"])
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/pandas/io/sql.py", line 469, in read_sql_query
    return pandas_sql.read_query(
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/pandas/io/sql.py", line 2266, in read_query
    cursor = self.execute(sql, params)
  File "/Users/null/microgrid_app/venv/lib/python3.9/site-packages/pandas/io/sql.py", line 2214, in execute
    raise ex from exc
pandas.errors.DatabaseError: Execution failed on sql 'SELECT timestamp, consumption_kW, temperature_C FROM consumption ORDER BY timestamp ASC': database is locked
127.0.0.1 - - [09/Oct/2025 21:11:15] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:11:15] "GET /api/stream?source=live HTTP/1.1" 200 -
 * Detected change in '/Users/null/microgrid_app/app.py', reloading
Starting Flask on port 8000 (set PORT env var to override)
 * Restarting with stat
/Users/null/microgrid_app/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
 * Debugger is active!
 * Debugger PIN: 135-539-520
127.0.0.1 - - [09/Oct/2025 21:11:18] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:11:30] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:11:30] "GET /api/stream?source=live HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:11:45] "GET /api/dashboard?source=live&algo=rf&mode=normal&soc_min=0 HTTP/1.1" 200 -
127.0.0.1 - - [09/Oct/2025 21:11:45] "GET /api/stream?source=live HTTP/1.1" 200 -
